<h1>自己紹介を編集する</h1>
<div class="form"> 

    <%= form_with(model: @user) do |f| %>
        <%= render 'shared/error_messages', user: @user %>
        <div class="input_form">
            <label>自己紹介文</label><br>
            <%= f.text_area :introduce, rows:"5", cols:"52", wrap:"hard", minLength:"50", id:"user_introduce" %><br>
            <label>50文字以上、200文字未満で入力してください。</label><br>
        </div><br>

        <div class="input_form">
            <div class="file-input_form">
                <label>アバター画像</label><br>
                <label class="file-input">
                    <%= f.file_field:avatar, style:"display:none;", name:"user[avatar]", id:"user_avatar", onchange: "avatarImage(this);", accept: "image/jpeg,image/gif,image/png", class: "mb-3" %>
                    画像ファイルを添付する
                </label>

                <div id="avatar" >
                    <img id="avatar_preview" class="mb-3" width="100">
                </div>

            </div>
        </div><br>
        <%= f.submit "自己紹介を確定する", class: "btn" %>
    <% end %>
</div>




<script>
  function avatarImage(obj){
      var fileReader = new FileReader();
      fileReader.onload = (function() {
        document.getElementById('avatar_preview').src = fileReader.result;
      });
      fileReader.readAsDataURL(obj.files[0]);
  }
</script>